## 2022/6/9 字节面试



#### 1. 正向代理和反向代理

1. 正向代理：位于客户端和目标服务器之间的代理服务器。

   > 为了从原始服务器取得内容，客户端向代理服务器发送一个请求，并且指定目标服务器
   >
   > 之后代理向目标服务器转交并且将获得的内容返回给客户端。
   >
   > 正向代理的情况下客户端必须要进行一些特别的设置才能使用。

2. 反向代理：==对客户端而言， 反向代理就像目标服务器。== 反向代理服务器判断客户端的请求，客户端感知不到 代理服务器的存在。

3. 区别：

   > 正向代理需要你主动设置代理服务器ip或者域名进行访问，由设置的服务器ip或者域名去获取访问内容并返回；
   >
   > 而反向代理不需要你做任何设置，直接访问服务器真实ip或者域名，但是服务器内部会自动根据访问内容进行跳转及内容返回，你不知道它最终访问的是哪些机器。

4. 如何定义正向和反向？

   正向代理中， proxy和client同属一个LAN，对server透明；反向代理中， proxy和server同属一个LAN，对client透明。

   ![](https://github.com/Alexanderisgod/PicBed/blob/main/20220610170828.png?raw==trrue)

5. 用途上的区别：

   正向代理：为防火墙内的局域网提供访问internet的途径。另外还可以使用缓冲特性减少网络使用率。

   反向代理：将防火墙后面的服务器提供给internet访问，完成负载均衡相关。

   > - 保护和隐藏原始资源服务器
   > - 加密和SSL加速
   > - 负载均衡
   > - 缓存静态内容
   > - 压缩
   > - 减速上传
   > - 安全
   > - 外网发布

#### 2. 负载均衡

定义：负载均衡是将负载分摊到多个操作单元上执行，从而提高服务的可用性和响应速度，带给用户更好的体验。对于Web应用，通过负载均衡，可以将一台服务器的工作扩展到多台服务器中执行，提高整个网站的负载能力。其本质采用一个调度者，保证所有后端服务器都将性能充分发挥，从而保持服务器集群的整体性能最优，这就是负载均衡。

均衡机制：轮询，最少连接数，IP-hash(基于客户端的IP地址)

#### 3. HashMap的底层结构

HashMap中采用了==数组+链表（或红黑树）==的方式，实现对数据的存储。

- **数组的特点：查询效率高，插入，删除效率低**。
- **链表的特点：查询效率低，插入删除效率高**

在HashMap底层使用数组加（链表或红黑树）的结构完美的解决了数组和链表的问题，使得查询和插入，删除的效率都很高。

跳跃链表：SkipList——实现快速查找、增删数据的数据结构，$O(log\,N)$ 的复杂度增删查。

#### 4. python装饰器

```python
import time


def time_out(func):
    def wrapper(*args, **kwargs):
        print("time_out func")
        start_time = time.time()
        result = func(*args, **kwargs)
        print('used time: {:.2f}'.format(time.time()-start_time))
        return result
    
    return wrapper

@time_out
def func():
    time.sleep(1.3)


# 内嵌函数
def mult(x):

    def mul(y):
        return x*y

    return mul


if __name__=="__main__":
    # func()
    print(mult(3)(4))

```

